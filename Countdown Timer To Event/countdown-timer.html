<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Countdown Timer to Event</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background:linear-gradient(120deg,#ffeccd 0%,#bde5ff 100%);
      font-family:'Segoe UI',Arial,sans-serif;min-height:100vh;margin:0;color:#253663;
      display:flex;flex-direction:column;align-items:center;}
    h1 {margin:35px 0 11px 0;font-size:2.15rem;color:#3369cd;}
    .main-box {
      background:rgba(255,255,255,0.98);padding:29px 18px 13px 18px;
      border-radius:15px;box-shadow:0 4px 22px #bde5ff3a;
      min-width:310px;max-width:97vw;width:370px;display:flex;flex-direction:column;align-items:center;
    }
    .add-form {display:flex;flex-wrap:wrap;gap:7px;align-items:center;margin-bottom:10px;}
    .add-form input[type=text]{font-size:1em;padding:7px 13px;border-radius:7px;width:106px;border:1.3px solid #bdecff;}
    .add-form input[type=datetime-local]{font-size:1em;padding:7px 8px;border-radius:7px;border:1.3px solid #ffe9ea;}
    .add-form button {
      background:#3369cd;color:#fff;font-weight:700;border:none;
      border-radius:7px;padding:7px 16px;cursor:pointer;transition:background .13s;}
    .add-form button:hover {background:#24448b;}
    .timers-list{width:100%;}
    .timer {
      background:#fafdff;border-radius:11px;box-shadow:0 2px 8px #b884803c;
      padding:10px 13px 13px 13px;margin-bottom:13px;position:relative;animation:fadein .48s;
      font-size:1.08em;transition:background .12s;overflow:hidden;
    }
    .tim-title {font-weight:700;color:#3175fa;}
    .tim-date {color:#856da6;font-size:.99em;}
    .del-btn {
      background:none;border:none;color:#ec1e3a;cursor:pointer;font-size:1.19em;padding:0 8px;position:absolute;right:7px;top:7px;border-radius:7px;transition:background .11s;}
    .del-btn:hover {background:#fee1e3;}
    .progress-bar{height:6px;background:#eef4ff;border-radius:5px;margin:8px 0;}
    .progress {height:100%;background:#66e19b;border-radius:5px;}
    .tim-count {font-family:Consolas,monospace;font-size:1.18em;color:#356aa9;}
    @keyframes fadein{0%{opacity:0;transform:scale(.95);}100%{opacity:1;transform:scale(1);}}
    .footer{margin:21px 0 8px 0;text-align:center;opacity:.36;font-size:.97em;}
    @media(max-width:430px){.main-box{padding:9px 2vw 7px 2vw;}}
  </style>
</head>
<body>
  <h1>⏳ Countdown Timer</h1>
  <div class="main-box">
    <form class="add-form" id="addTimer" autocomplete="off">
      <input type="text" id="label" maxlength="30" placeholder="Event name" required>
      <input type="datetime-local" id="datetime" required>
      <button type="submit">Add</button>
    </form>
    <div class="timers-list" id="timers"></div>
  </div>
  <div class="footer">All-in-one HTML by YourName · Real-time, multiple countdowns, persistent</div>
  <script>
    function getTimers(){return JSON.parse(localStorage.countdowners||"[]");}
    function setTimers(d){localStorage.countdowners=JSON.stringify(d);}
    function render(){
      let d = getTimers(), box=document.getElementById('timers'), now=Date.now();
      d=d.filter(t=>t.until); // Remove broken entries
      box.innerHTML = d.map((t,i)=>{
        let lbl=t.label, date=new Date(t.until), allms=date-now;
        let done = allms<=0, totms=date-t.created, left=Math.max(0,allms), pct=totms?((totms-left)/totms)*100:100;
        let days = Math.floor(left/8.64e7);
        let hrs = Math.floor((left%8.64e7)/3.6e6);
        let mins = Math.floor((left%3.6e6)/6e4);
        let secs = Math.floor((left%6e4)/1000);
        return `<div class="timer${done?' done':''}">
          <button class="del-btn" onclick="delTimer(${t.id})">&times;</button>
          <div class="tim-title">${lbl}</div>
          <div class="tim-date">${date.toLocaleString()}</div>
          <div class="progress-bar"><div class="progress" style="width:${Math.max(0,Math.min(100,pct))}%;"></div></div>
          <div class="tim-count">${done?"Time's up!":`${days}d ${hrs}h ${mins}m ${secs}s`}</div>
        </div>`;
      }).join("") || "<div style='color:#b37;text-align:center;'>No countdowns yet.</div>";
    }
    document.getElementById('addTimer').onsubmit = function(e){
      e.preventDefault();
      let d=getTimers(),dt=this.datetime.valueAsNumber;
      d.push({
        id:Date.now(),
        label:this.label.value.trim(),
        until:dt,
        created:Date.now()
      });
      setTimers(d);this.reset();render();
    }
    window.delTimer = function(id){
      setTimers(getTimers().filter(t=>t.id!==id));render();
    }
    setInterval(render,1000);
    render();
  </script>
</body>
</html>
