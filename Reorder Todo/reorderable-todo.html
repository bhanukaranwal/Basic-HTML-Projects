<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drag & Reorder To-Do List</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background:linear-gradient(120deg,#e0c3fc 0%,#8ec5fc 100%);
      font-family:'Segoe UI',Arial,sans-serif;min-height:100vh;margin:0;color:#252343;
      display:flex;flex-direction:column;align-items:center;}
    h1 {margin:35px 0 15px 0;font-size:2.13rem;color:#7537c9;}
    .main-box {
      background:rgba(255,255,255,0.98);padding:29px 20px 16px 20px;
      border-radius:15px;box-shadow:0 4px 22px #9f41d017;
      min-width:310px;max-width:97vw;width:370px;display:flex;flex-direction:column;align-items:center;
    }
    form {display:flex;gap:7px;width:100%;margin-bottom:12px;}
    input[type=text] {font-size:1em;padding:7px 11px;border-radius:7px;width:75%;border:1.3px solid #d8aefb;}
    button {
      background:#602df8;color:#fff;font-weight:700;border:none;border-radius:8px;
      padding:7px 18px;cursor:pointer;transition:background .14s;}
    button:hover {background:#9f41d0;}
    .todo-list {width:100%;min-height:49px;}
    .todo-item {
      background:#f6f1ff;border-radius:10px;box-shadow:0 1px 8px #dfcafd29;
      padding:10px 13px 8px 13px;display:flex;align-items:center;gap:10px;margin-bottom:9px;
      font-size:1.07em;animation:fadein .5s;
      user-select:none; position:relative; cursor:grab;transition:background .11s;
    }
    .todo-item.drag-over {background:#d2e4fc;}
    .check {appearance:none;width:19px;height:19px;border-radius:6px;border:2px solid #ad80ef;cursor:pointer;margin-right:2px;}
    .check:checked {background:#8de18c;border-color:#5cc96b;}
    .done {text-decoration:line-through;opacity:0.61;}
    .del-btn {
      background:none;color:#d25253;border:none;cursor:pointer;font-size:1.19em;padding:0 7px;position:absolute;right:7px;top:7px;border-radius:7px;transition:background .11s;}
    .del-btn:hover {background:#ffe1e3;}
    @keyframes fadein {0%{opacity:0;transform:scale(.96);}100%{opacity:1;transform:scale(1);}}
    .footer{margin:22px 0 8px 0;text-align:center;opacity:.36;font-size:.98em;}
    @media(max-width:430px){.main-box{padding:9px 2vw 7px 2vw;}}
  </style>
</head>
<body>
  <h1>✅ Reorderable To-Do List</h1>
  <div class="main-box">
    <form id="form" autocomplete="off">
      <input type="text" id="todoInput" maxlength="80" placeholder="Add a new task..." required>
      <button>Add</button>
    </form>
    <div class="todo-list" id="todoList"></div>
  </div>
  <div class="footer">All-in-one HTML by YourName · Drag to reorder, persistent in-browser</div>
  <script>
    function getTodos(){return JSON.parse(localStorage.reorderTodos||'[]');}
    function setTodos(d){localStorage.reorderTodos=JSON.stringify(d);}
    function render(){
      let d=getTodos(), l=document.getElementById('todoList');
      l.innerHTML = d.map((t,i)=>`<div class="todo-item${t.done?' done':''}" draggable="true" data-i="${i}">
        <input type="checkbox" class="check" ${t.done?'checked':''} onchange="toggleDone(${i})">
        <span>${t.text}</span>
        <button class="del-btn" title="Delete" onclick="delTodo(${i})">&times;</button>
      </div>`).join("")||"<div style='color:#b37;text-align:center;'>No todos yet.</div>";
      setDrag();
    }
    document.getElementById('form').onsubmit = function(e){
      e.preventDefault();
      let val = this.todoInput.value.trim();
      if(!val)return;
      let d=getTodos();
      d.push({text:val,done:false});
      setTodos(d); this.todoInput.value="";render();
    }
    window.delTodo = function(i){
      let d = getTodos();d.splice(i,1);setTodos(d);render();
    }
    window.toggleDone = function(i){
      let d = getTodos();d[i].done=!d[i].done;setTodos(d);render();
    }
    // --- Drag & Drop Reordering ---
    function setDrag(){
      let items = document.querySelectorAll('.todo-item'), from;
      items.forEach((item,i)=>{
        item.ondragstart = e=>{
          from=i;item.classList.add('drag-over');
          e.dataTransfer.effectAllowed="move";
        };
        item.ondragend = ()=>items.forEach(it=>it.classList.remove('drag-over'));
        item.ondragover = e=>{e.preventDefault();item.classList.add('drag-over')};
        item.ondragleave = ()=>item.classList.remove('drag-over');
        item.ondrop = e=>{
          let to=+item.dataset.i, todos=getTodos();
          if(typeof from!=="undefined"&&from!==to){
            let [t]=todos.splice(from,1);
            todos.splice(to,0,t);
            setTodos(todos);render();
          }
        };
      });
    }
    render();
  </script>
</body>
</html>
