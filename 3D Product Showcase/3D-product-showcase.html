<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive 3D Product Showcase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    #container {
      width: 90vw;
      max-width: 900px;
      height: 70vh;
      position: relative;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
      background: #111;
    }
    #info-panel {
      position: absolute;
      top: 20px;
      right: 20px;
      max-width: 220px;
      background: rgba(0, 0, 0, 0.7);
      padding: 14px 18px;
      border-radius: 12px;
      font-size: 0.95rem;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      box-shadow: 0 3px 10px rgba(255,255,255,0.1);
    }
    #info-panel.visible {
      pointer-events: auto;
      opacity: 1;
    }
    #info-panel h3 {
      margin-top: 0;
      font-size: 1.2rem;
      margin-bottom: 8px;
      color: #ffd966;
      user-select: none;
    }
    #info-panel p {
      margin: 0;
      line-height: 1.3;
      user-select: none;
    }
    canvas {
      display: block; /* removes small gaps*/
      border-radius: 16px;
      cursor: grab;
    }
    canvas:active {
      cursor: grabbing;
    }
    .hotspot {
      position: absolute;
      background: #ffd966;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      box-shadow: 0 0 8px #ffe066;
      cursor: pointer;
      user-select: none;
      border: 2px solid #cda500;
      transition: transform 0.2s ease;
      transform: translate(-50%, -50%);
    }
    .hotspot:hover {
      transform: translate(-50%, -50%) scale(1.3);
      box-shadow: 0 0 14px #ffea69;
    }
  </style>
</head>
<body>
  <h1>Interactive 3D Product Showcase</h1>
  <div id="container">
    <div id="info-panel"></div>
  </div>
  <!-- Three.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/controls/OrbitControls.min.js"></script>
  <script>
    (() => {
      const container = document.getElementById('container');
      const infoPanel = document.getElementById('info-panel');

      // Scene setup
      const scene = new THREE.Scene();

      // Camera setup
      const camera = new THREE.PerspectiveCamera(
        45,
        container.clientWidth / container.clientHeight,
        0.1,
        1000
      );
      camera.position.set(3, 3, 5);

      // Renderer setup
      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(container.clientWidth, container.clientHeight);
      renderer.setClearColor(0x111111, 0); // transparent background
      container.appendChild(renderer.domElement);

      // Controls setup
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.1;
      controls.minDistance = 2;
      controls.maxDistance = 15;
      controls.target.set(0, 0.5, 0);
      controls.update();

      // Resize handling
      window.addEventListener('resize', () => {
        const w = container.clientWidth;
        const h = container.clientHeight;
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
        renderer.setSize(w, h);
      }, false);

      // Ambient light
      scene.add(new THREE.AmbientLight(0xffffff, 0.7));

      // Directional light
      const dirLight = new THREE.DirectionalLight(0xffffff, 1);
      dirLight.position.set(5, 10, 7);
      scene.add(dirLight);

      // Create a 3D product model as a sample (a simple shoe shape)
      const shoeGroup = new THREE.Group();

      // Sole
      const soleGeometry = new THREE.BoxGeometry(3, 0.5, 1);
      const soleMaterial = new THREE.MeshStandardMaterial({ color: 0x222222, roughness: 0.8, metalness: 0.3 });
      const sole = new THREE.Mesh(soleGeometry, soleMaterial);
      sole.position.set(0, 0, 0);
      shoeGroup.add(sole);

      // Upper shoe (curved box)
      const upperShape = new THREE.Shape();
      upperShape.moveTo(-1.4, 0);
      upperShape.quadraticCurveTo(-1.5, 1.2, -0.5, 1.4);
      upperShape.lineTo(1.1, 1.4);
      upperShape.quadraticCurveTo(1.5, 1.2, 1.5, 0);
      upperShape.closePath();
      const extrudeSettings = { depth: 1, bevelEnabled: true, bevelSegments: 2, steps: 2, bevelSize: 0.2, bevelThickness: 0.3 };
      const upperGeometry = new THREE.ExtrudeGeometry(upperShape, extrudeSettings);
      const upperMaterial = new THREE.MeshStandardMaterial({ color: 0xff3f4d, roughness: 0.4, metalness: 0.7 });
      const upper = new THREE.Mesh(upperGeometry, upperMaterial);
      upper.position.set(0, 0.5, -0.5);
      upper.rotation.x = -0.4;
      shoeGroup.add(upper);

      scene.add(shoeGroup);

      // Create hotspots data (position in 3D, title, description)
      const hotspotsData = [
        {
          position: new THREE.Vector3(0, 1.3, 0.2),
          title: "Premium Leather Upper",
          description: "Soft, breathable synthetic leather for a comfortable and stylish finish."
        },
        {
          position: new THREE.Vector3(1.1, 0.6, 0.8),
          title: "Cushioned Sole",
          description: "EVA foam sole provides excellent cushioning and energy return."
        },
        {
          position: new THREE.Vector3(-1.2, 0.3, -0.8),
          title: "Anti-Slip Outsole",
          description: "Durable ruber outsole with excellent traction and grip."
        }
      ];

      // Create hotspot elements
      const hotspots = [];
      hotspotsData.forEach((hotspot, idx) => {
        const el = document.createElement('div');
        el.className = 'hotspot';
        el.title = hotspot.title;
        container.appendChild(el);
        hotspots.push({el, data: hotspot});
      });

      // Raycaster for interaction
      const raycaster = new THREE.Raycaster();
      const mouse = new THREE.Vector2();
      let activeHotspot = null;

      // Update hotspots position on render
      function updateHotspots() {
        hotspots.forEach(({el, data}) => {
          const screenPos = data.position.clone();
          screenPos.project(camera);
          const x = (screenPos.x * 0.5 + 0.5) * container.clientWidth;
          const y = (-screenPos.y * 0.5 + 0.5) * container.clientHeight;
          el.style.transform = `translate(${x}px, ${y}px)`;
          // Hide hotspot if behind camera
          el.style.display = (screenPos.z > 1 || screenPos.z < -1) ? 'none' : 'block';
        });
      }

      // Click hotspot event
      container.addEventListener('click', event => {
        const rect = container.getBoundingClientRect();
        mouse.x = ((event.clientX - rect.left) / container.clientWidth) * 2 - 1;
        mouse.y = -((event.clientY - rect.top) / container.clientHeight) * 2 + 1;

        raycaster.setFromCamera(mouse, camera);
        const intersects = [];
        hotspots.forEach(({data}) => {
          const distance = raycaster.ray.distanceToPoint(data.position);
          if (distance < 0.2) intersects.push(data);
        });

        if (intersects.length) {
          const target = intersects[0];
          showInfo(target.title, target.description);
        } else {
          hideInfo();
        }
      });

      function showInfo(title, description) {
        infoPanel.innerHTML = `<h3>${title}</h3><p>${description}</p>`;
        infoPanel.classList.add('visible');
      }

      function hideInfo() {
        infoPanel.classList.remove('visible');
      }

      // Rendering loop
      function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
        updateHotspots();
      }

      animate();
    })();
  </script>
</body>
</html>
