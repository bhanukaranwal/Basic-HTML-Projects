<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Recipe Meal Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background:linear-gradient(120deg,#ffe1e9 0%,#bff0e6 100%);
      font-family:'Segoe UI',Arial,sans-serif;min-height:100vh;margin:0;color:#2d3e37;
      display:flex;flex-direction:column;align-items:center;}
    h1 {margin:30px 0 12px 0;font-size:2.08rem;color:#4ea092;}
    .main-box {
      background:rgba(255,255,255,0.97);padding:24px 13px 11px 13px;
      border-radius:16px;box-shadow:0 4px 22px #c0eee17e;
      min-width:310px;max-width:99vw;width:405px;display:flex;flex-direction:column;align-items:center;
    }
    .add-form {display:flex;flex-wrap:wrap;gap:7px;align-items:center;margin-bottom:16px;}
    .add-form input,.add-form textarea {
      font-size:1em;padding:7px 10px;border-radius:7px;border:1.2px solid #bce5e3;margin-right:3px;
    }
    .add-form textarea{min-height:38px;}
    .add-form button {
      background:#4ea092;color:#fff;font-weight:700;border:none;
      border-radius:7px;padding:7px 16px;cursor:pointer;transition:background .13s;}
    .add-form button:hover {background:#167663;}
    .list-row {display:flex;gap:13px;width:100%;justify-content:center;}
    .recipes, .calendar {background:#fcfffe;border-radius:12px;padding:11px 8px;box-shadow:0 2px 10px #ceead375;}
    .recipes {width:48%;}
    .calendar {width:48%;}
    .rec-title {font-weight:700;text-align:center;color:#eb7e45;margin-bottom:5px;}
    .r-list {min-height:38px;margin-bottom:5px;}
    .rec {background:#fdf2e5;border-radius:9px;padding:7px 6px;margin-bottom:7px;cursor:grab;
      font-size:1em;box-shadow:0 1px 6px #d2b89944;display:flex;align-items:center;justify-content:space-between;}
    .rec:hover {background:#ffe3cb;}
    .del-btn {background:#efc0be;color:#bf475e;border:none;border-radius:7px;cursor:pointer;font-size:1em;
      padding:1px 8px;margin-left:4px;transition:background .12s;}
    .del-btn:hover {background:#ffaaae;}
    .cal-title {font-weight:700;text-align:center;color:#399088;margin-bottom:4px;}
    .week {display:grid;grid-template-columns:repeat(7,1fr);gap:8px;}
    .day {background:#eafff7;border-radius:9px;min-height:49px;text-align:center;position:relative;padding:5px 2px 5px 2px;}
    .day-label {color:#629490;font-size:1em;margin-bottom:2px;}
    .plan {background:#fdfff0;color:#cb7e22;border-radius:6px;padding:3px;display:flex;justify-content:space-between;align-items:center;margin:2px 0;}
    .plan .del-btn{padding:1px 7px;font-size:.98em;}
    .footer{margin:18px 0 7px 0;text-align:center;opacity:.37;font-size:.95em;}
    @media(max-width:700px){.list-row{flex-direction:column;}.recipes,.calendar{width:97%;margin-bottom:13px;}}
    @media(max-width:430px){.main-box{padding:9px 2vw 7px 2vw;}}
  </style>
</head>
<body>
  <h1>üçΩÔ∏è Meal Planner</h1>
  <div class="main-box">
    <form class="add-form" id="addForm" autocomplete="off">
      <input type="text" id="rName" maxlength="32" placeholder="Recipe name" required>
      <textarea id="rDesc" maxlength="90" placeholder="Recipe short notes"></textarea>
      <button type="submit">Add Recipe</button>
    </form>
    <div class="list-row">
      <div class="recipes">
        <div class="rec-title">Recipes</div>
        <div class="r-list" id="recipeList"></div>
      </div>
      <div class="calendar">
        <div class="cal-title">This Week</div>
        <div class="week" id="week"></div>
      </div>
    </div>
  </div>
  <div class="footer">All-in-one HTML by YourName ¬∑ Plan, drag, and customize your meal week</div>
  <script>
    // --- Data ---
    const DAYS = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    function getData(){return JSON.parse(localStorage.mealPlanData||'{"recipes":[],"week":[[],[],[],[],[],[],[]]}');}
    function setData(d){localStorage.mealPlanData=JSON.stringify(d);}
    // --- Render logic ---
    function render(){
      let d=getData();
      let rl = d.recipes.map((r,i)=>
        `<div class="rec" draggable="true" data-i="${i}">
          <span title="${r.desc||''}">${r.name}</span>
          <button class="del-btn" onclick="delRecipe(${i})">&times;</button>
        </div>`).join('') || "<span style='color:#bbb'>No recipes yet.</span>";
      document.getElementById('recipeList').innerHTML = rl;
      let w = d.week.map((day,i)=>`<div class="day" data-day="${i}">
        <div class="day-label">${DAYS[i]}</div>
        ${day.map((idx,j)=>`<div class="plan">${d.recipes[idx]?.name||"?"}
          <button class="del-btn" onclick="delPlan(${i},${j})">&times;</button></div>`).join('')}
      </div>`).join('');
      document.getElementById('week').innerHTML = w;
      setDnD();
    }
    // --- Add recipe ---
    document.getElementById('addForm').onsubmit = function(e){
      e.preventDefault();
      let d=getData();
      let name=this.rName.value.trim(), desc=this.rDesc.value.trim();
      if(!name)return;
      d.recipes.push({name,desc});
      setData(d);this.reset();render();
    };
    // --- Delete recipe
    window.delRecipe = function(i){
      let d=getData();
      d.recipes.splice(i,1);
      d.week = d.week.map(day=>day.filter(idx=>idx!==i).map(idx=>idx>i?idx-1:idx));
      setData(d);render();
    };
    // --- Delete plan
    window.delPlan = function(day, j){
      let d=getData();d.week[day].splice(j,1);setData(d);render();
    };
    // --- Drag and Drop ---
    function setDnD(){
      document.querySelectorAll('.rec').forEach(el=>{
        el.ondragstart = e => { e.dataTransfer.setData('idx',el.dataset.i); };
      });
      document.querySelectorAll('.day').forEach(day=>{
        day.ondragover = e=>e.preventDefault();
        day.ondrop = function(e){
          let idx = +e.dataTransfer.getData('idx'), di=+day.dataset.day, d=getData();
          if(!isNaN(idx)) { d.week[di].push(idx); setData(d); render(); }
        }
      });
    }
    render();
  </script>
</body>
</html>
