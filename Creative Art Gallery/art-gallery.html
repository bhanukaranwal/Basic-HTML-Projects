<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Art Gallery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(120deg, #fdf6e3 0%, #f5c6e5 100%);
      min-height: 100vh; margin: 0;
      display: flex; flex-direction: column; align-items: center;
    }
    h1 { font-size: 2.1rem; letter-spacing: 1px; margin: 32px 0 14px 0;}
    .main-box {
      background: rgba(255,255,255,0.97); padding: 28px 22px 24px 22px;
      border-radius: 16px; box-shadow: 0 4px 22px #eaaac31a;
      min-width: 330px; max-width: 99vw; margin-bottom: 20px;
      display:flex; flex-direction:column; align-items:center;
    }
    .controls {margin-bottom:8px;}
    select,input[type=range] {margin:0 4px; border-radius:5px; padding:4px 8px; border:1px solid #ffcbe0;}
    .palette { display:flex;gap:6px;margin-bottom:12px; flex-wrap:wrap;}
    .swatch {
      width:24px;height:24px; border-radius:4px; border:1.5px solid #4442; cursor:pointer; transition: transform 0.09s;
      box-shadow:0 1px 3px #cba2; box-sizing:border-box;
    }
    .swatch.selected {border:2px solid #333;transform:scale(1.09);}
    #artboard { 
      background:#eee; box-shadow:0 3px 14px #cf78bd22; border-radius:11px;
      margin-bottom:9px; display:block; cursor:crosshair;
      touch-action: none;
    }
    .save-btn {
      background: #a6e0c2; color:#294828; font-weight:600; border:none; border-radius:7px;
      font-size: 1rem; padding:7px 18px; margin:2px 10px 0 0; cursor:pointer;
      transition:background 0.13s;
    }
    .save-btn:hover{background:#84cc9f;}
    .gallery-title { margin:10px 0 2px 0;font-weight:700;color:#9d5890;}
    .gallery-list {display:flex;flex-wrap:wrap;gap:12px;}
    .mini-pic{width:54px; height:54px; border-radius:6px; background:#fff;
      border:1.5px solid #e3c3c7; box-shadow:0 2px 8px #0001; cursor:pointer; }
    .footer{margin:23px 0 9px 0; text-align:center; opacity:0.36; font-size:0.98rem;}
    @media(max-width:420px){.main-box{padding:8px 3vw 12px 3vw;}}
  </style>
</head>
<body>
  <h1>ðŸŽ¨ Interactive Art Gallery</h1>
  <div class="main-box">
    <div class="controls">
      Canvas: 
      <select id="sizeSelector">
        <option value="16">16Ã—16</option>
        <option value="24" selected>24Ã—24</option>
        <option value="32">32Ã—32</option>
      </select>
      | Brush Size: 
      <input type="range" min="1" max="4" value="1" id="brushSize" style="width:55px;">
      <span id="brushSizeLabel">1</span>
    </div>
    <div class="palette" id="palette"></div>
    <canvas id="artboard" width="336" height="336"></canvas>
    <div>
      <button class="save-btn" onclick="savePicture()">Save to Gallery</button>
      <button class="save-btn" onclick="clearBoard()" style="background:#f8c6ce;color:#832222;">Clear</button>
    </div>
    <div class="gallery-title">Mini Gallery</div>
    <div class="gallery-list" id="gallery"></div>
  </div>
  <div class="footer">All-in-one HTML by YourName Â· Share your pixel creations!</div>
  <script>
    // Config
    const COLORS = [
      "#1a1a1a","#fff","#de444e","#fdc019","#299e65","#4d6cfa","#9028c7","#fe7d15","#86e1ff",
      "#fac6db","#b4ead6","#693c18","#c4bcc1","#a88359","#ffe340","#efbf40"
    ];
    // Canvas State
    let grid = [], size = 24, brush = 1, currColor = COLORS[0], drawing = false;
    const artboard = document.getElementById("artboard"), ctx = artboard.getContext("2d");
    const paletteDiv = document.getElementById("palette");
    const brushSlider = document.getElementById("brushSize"), brushLabel = document.getElementById("brushSizeLabel");
    // Setup Palette
    COLORS.forEach(clr=>{
      let sw = document.createElement('div');
      sw.className = 'swatch'; sw.style.background = clr;
      sw.onclick = ()=>{currColor=clr;document.querySelectorAll('.swatch').forEach(s=>s.classList.remove('selected'));sw.classList.add('selected');};
      paletteDiv.appendChild(sw);
    });
    paletteDiv.firstChild.classList.add('selected');
    // Grid helpers
    function resetGrid(s) { grid=[]; for(let i=0;i<s*s;++i) grid.push("#fff"); }
    function drawGrid() {
      ctx.clearRect(0,0,artboard.width,artboard.height);
      let cell = artboard.width/size;
      for(let i=0;i<size;++i) for(let j=0;j<size;++j) {
        ctx.fillStyle = grid[i*size+j];
        ctx.fillRect(j*cell,i*cell,cell,cell);
      }
      ctx.strokeStyle="#ffdede"; ctx.lineWidth=1;
      for(let i=0;i<=size;++i){
        ctx.beginPath(); ctx.moveTo(i*cell,0); ctx.lineTo(i*cell,artboard.height); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0,i*cell); ctx.lineTo(artboard.width,i*cell); ctx.stroke();
      }
    }
    function fillCells(x, y) {
      let cell = artboard.width/size;
      let cx = Math.floor(x/cell), cy = Math.floor(y/cell);
      for(let dx=-brush+1;dx<brush;++dx)
      for(let dy=-brush+1;dy<brush;++dy){
        let nx=cx+dx, ny=cy+dy;
        if(nx>=0&&ny>=0&&nx<size&&ny<size)
          grid[ny*size+nx]=currColor;
      }
      drawGrid();
    }
    // Events
    artboard.onpointerdown = function(e) { drawing = true; paint(e);}
    artboard.onpointerup = function(){drawing=false;}
    artboard.onpointerleave = function(){drawing=false;}
    artboard.onpointermove = function(e){if(drawing)paint(e);}
    function paint(e){
      let rect = artboard.getBoundingClientRect();
      fillCells(e.clientX-rect.left,e.clientY-rect.top);
    }
    // Size/Brush
    document.getElementById("sizeSelector").onchange = function(){
      size = +this.value; artboard.width = artboard.height = size*14; resetGrid(size); drawGrid();
    };
    brushSlider.oninput = function(){brush=+this.value; brushLabel.textContent=brush;}
    // --- Gallery ---
    function savePicture(){
      let cell = artboard.width/size;
      // Downsample to 18x18 for gallery thumbnails
      let thumb = document.createElement('canvas');
      thumb.width = thumb.height = 54;
      let tctx = thumb.getContext('2d');
      for(let i=0;i<size;++i)
      for(let j=0;j<size;++j){
        tctx.fillStyle = grid[i*size+j];
        tctx.fillRect(j*3,i*3,3,3);
      }
      thumb.className = 'mini-pic';
      thumb.title = "Click to reload as canvas";
      thumb.onclick = function(){
        if(confirm("Load this as your canvas? (Unsaved art will be lost)")){
          for(let i=0;i<size*size;++i) grid[i]= "#fff";
          let id = tctx.getImageData(0,0,54,54).data;
          for(let y=0;y<size;++y)
          for(let x=0;x<size;++x){
            let idx = ((y*3)*54+(x*3))*4;
            let c = `rgb(${id[idx]},${id[idx+1]},${id[idx+2]})`;
            grid[y*size+x]=c;
          }
          drawGrid();
        }
      };
      document.getElementById("gallery").appendChild(thumb);
    }
    function clearBoard() { resetGrid(size); drawGrid(); }
    // Init
    resetGrid(size); drawGrid();
  </script>
</body>
</html>
